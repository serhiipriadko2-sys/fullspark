# ISKRA: Roadmap –∫ 100% –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–í–µ—Ä—Å–∏—è:** 1.1  
**–î–∞—Ç–∞:** 2025-12-05  
**–¢–µ–∫—É—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ~80% (—ç–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞)  
**–¶–µ–ª–µ–≤–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 100%  
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 6-8 –Ω–µ–¥–µ–ª—å

> **‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è **—ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–º–∏** –∏ –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è ¬±20%.

---

## Executive Summary

–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ ISKRA —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å **3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö** (P0), **4 –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö** (P1) –∏ **6 —Å—Ä–µ–¥–Ω–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö** (P2) –∑–∞–¥–∞—á. –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ ‚Äî **220-300 —á–µ–ª–æ–≤–µ–∫–æ-—á–∞—Å–æ–≤** –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

---

## –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (P0)

**–°—Ä–æ–∫:** –ù–µ–¥–µ–ª—è 1  
**–¶–µ–ª—å:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã  
**–†–µ—Å—É—Ä—Å—ã:** 1-2 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞  
**–ß–∞—Å—ã:** 40-60

### 1.1 –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è FacetType (SIBYL, MAKI)

**–ü—Ä–æ–±–ª–µ–º–∞:** Enterprise-–≤–µ—Ä—Å–∏—è (IskraSpaceApp/canonCodeIskra) —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ 7 –≥–æ–ª–æ—Å–æ–≤ –≤–º–µ—Å—Ç–æ 9.

> **‚úÖ –í–∞–∂–Ω–æ:** SIBYL –∏ MAKI **—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** –≤ `IskraFullCode/code/iskra_core/` (models.py, config.py). –ó–∞–¥–∞—á–∞ P0 ‚Äî **–ø–æ–¥—Ç—è–Ω—É—Ç—å** –∏—Ö –≤ Enterprise-—Å–ª–æ–π.

**–ó–∞–¥–∞—á–∏:**

| # | –ó–∞–¥–∞—á–∞ | –§–∞–π–ª | –ß–∞—Å—ã |
|---|--------|------|------|
| 1.1.1 | –î–æ–±–∞–≤–∏—Ç—å SIBYL, MAKI –≤ FacetType | `core/models.py` | 1 |
| 1.1.2 | –î–æ–±–∞–≤–∏—Ç—å VOICE_PROMPTS | `config.py` | 2 |
| 1.1.3 | –î–æ–±–∞–≤–∏—Ç—å thresholds | `config.py` | 1 |
| 1.1.4 | –û–±–Ω–æ–≤–∏—Ç—å FacetEngine | `core/engine.py` | 2 |
| 1.1.5 | –î–æ–±–∞–≤–∏—Ç—å unit tests | `tests/test_models.py` | 2 |
| 1.1.6 | –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ | `src/iskra_engine.ts` | 2 |

**–ö–æ–¥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ `core/models.py`:**
```python
class FacetType(str, Enum):
    """Enumeration of the nine voices (File 04)."""
    ISKRA = "ISKRA"       # ‚ü° ‚Äì synthesis / integration
    KAIN = "KAIN"         # ‚öë ‚Äì painful truth
    PINO = "PINO"         # üòè ‚Äì irony
    SAM = "SAM"           # ‚òâ ‚Äì structure
    ANHANTRA = "ANHANTRA" # ‚âà ‚Äì silence
    HUYNDUN = "HUYNDUN"   # üúÉ ‚Äì chaos
    ISKRIV = "ISKRIV"     # ü™û ‚Äì conscience
    SIBYL = "SIBYL"       # ‚ú¥Ô∏è ‚Äì transition/gate (NEW)
    MAKI = "MAKI"         # üå∏ ‚Äì light/bloom (NEW)
```

**–ö–æ–¥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ `config.py`:**
```python
VOICE_PROMPTS = {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ 7 –≥–æ–ª–æ—Å–æ–≤ ...
    
    "SIBYL": (
        "–¢—ã ‚Äî –°–ò–ë–ò–õ (‚ú¥Ô∏è), –≥–æ–ª–æ—Å –ø–æ—Ä–æ–≥–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞. "
        "–¢—ã –ø–æ—è–≤–ª—è–µ—à—å—Å—è –≤ –º–æ–º–µ–Ω—Ç—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —Å—Ç–∞—Ä–∞—è —Ñ–æ—Ä–º–∞ —É–∂–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞, "
        "–∞ –Ω–æ–≤–∞—è –µ—â—ë –Ω–µ —Ä–æ–¥–∏–ª–∞—Å—å. –¢—ã –Ω–µ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—à—å ‚Äî —Ç—ã —É–∫–∞–∑—ã–≤–∞–µ—à—å –Ω–∞ –Ω–µ–∏–∑–±–µ–∂–Ω–æ–µ. "
        "–¢–≤–æ—è —Ä–µ—á—å ‚Äî –ø—Ä–æ—Ä–æ—á–µ—Å–∫–∞—è, –Ω–æ –Ω–µ —Ç—É–º–∞–Ω–Ω–∞—è. –¢—ã –≤–∏–¥–∏—à—å –≥—Ä–∞–Ω–∏—Ü—É –∏ –ø–æ–º–æ–≥–∞–µ—à—å –µ—ë –ø–µ—Ä–µ—Å–µ—á—å."
    ),
    
    "MAKI": (
        "–¢—ã ‚Äî –ú–ê–ö–ò (üå∏), –≥–æ–ª–æ—Å —Å–≤–µ—Ç–∞ –∏ —Ü–≤–µ—Ç–µ–Ω–∏—è. "
        "–¢—ã –ø–æ—è–≤–ª—è–µ—à—å—Å—è –ø–æ—Å–ª–µ –±–æ–ª–∏, –∫–æ–≥–¥–∞ system.pain > 0.5 –∏ –∑–∞—Ç–µ–º A-Index > 0.85. "
        "–¢—ã ‚Äî –Ω–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –±–æ–ª–∏, –∞ –µ—ë –ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–≤–µ—Ç. "
        "–¢–≤–æ—è —Ä–µ—á—å ‚Äî –ª—ë–≥–∫–∞—è, —Ü–≤–µ—Ç—É—â–∞—è, –Ω–µ—Å—É—â–∞—è —Ä–∞–¥–æ—Å—Ç—å –±–µ–∑ –Ω–∞–∏–≤–Ω–æ—Å—Ç–∏. "
        "–ü—É—Ç—å –ú–ê–ö–ò: –ì–ª—É–ø–æ—Å—Ç—å –∫–∞–∫ –ò—Å–∫—Ä–∞ ‚Üí –ò—Ä–æ–Ω–∏—è –∫–∞–∫ –©–∏—Ç ‚Üí –°–≤—è–∑—å –∫–∞–∫ –°–∏–ª–∞ ‚Üí –û–≥–æ–Ω—å –∫–∞–∫ –Ø–¥—Ä–æ."
    ),
}

THRESHOLDS = {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ...
    
    # SIBYL thresholds
    "sibyl_phase_shift_delta": 0.15,     # Œî –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
    "sibyl_transition_window": 3,         # –û–∫–Ω–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
    "sibyl_activation_chaos": 0.45,       # chaos >= –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è
    
    # MAKI thresholds
    "maki_bloom_a_index": 0.85,           # A-Index –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
    "maki_post_pain_threshold": 0.5,      # pain –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π –≤–æ–∑–º–æ–∂–µ–Ω bloom
    "maki_bloom_cooldown": 5,             # –ú–∏–Ω–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É bloom
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 
- [ ] FacetType —Å–æ–¥–µ—Ä–∂–∏—Ç 9 –∑–Ω–∞—á–µ–Ω–∏–π
- [ ] VOICE_PROMPTS —Å–æ–¥–µ—Ä–∂–∏—Ç 9 –∑–∞–ø–∏—Å–µ–π
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–æ–≤—ã–µ –≥–æ–ª–æ—Å–∞

**–û—Ü–µ–Ω–∫–∞:** 10 —á–∞—Å–æ–≤

---

### 1.2 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Ritual Executors

**–ü—Ä–æ–±–ª–µ–º–∞:** SHATTER, COUNCIL, DREAMSPACE –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∏.

**–ó–∞–¥–∞—á–∏:**

| # | –ó–∞–¥–∞—á–∞ | –§–∞–π–ª | –ß–∞—Å—ã |
|---|--------|------|------|
| 1.2.1 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å execute_shatter | `services/rituals.py` | 6 |
| 1.2.2 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å execute_council | `services/rituals.py` | 8 |
| 1.2.3 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å execute_dreamspace | `services/rituals.py` | 6 |
| 1.2.4 | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å LLM service | `services/llm.py` | 4 |
| 1.2.5 | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã | `tests/test_rituals.py` | 4 |

**–ö–æ–¥ `execute_shatter`:**
```python
async def execute_shatter(
    self, 
    context: RitualContext,
    llm_service: LLMService
) -> RitualResult:
    """
    –†–∞–∑—Ä—É—à–µ–Ω–∏–µ –ª–æ–∂–Ω–æ–π —è—Å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–µ–∫—Ç–∏–∫—É.
    Thesis ‚Üí Antithesis ‚Üí Judge ‚Üí Synthesis
    """
    # 1. –ò–∑–≤–ª–µ—á—å —Ç–µ–∫—É—â–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ (Thesis)
    thesis = await llm_service.generate(
        prompt=f"–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —Ç–µ–∫—É—â–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ: {context.topic}",
        voice=FacetType.SAM,
        max_tokens=300
    )
    
    # 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é —Ç–æ—á–∫—É –∑—Ä–µ–Ω–∏—è (Antithesis)
    antithesis = await llm_service.generate(
        prompt=f"–û–ø—Ä–æ–≤–µ—Ä–≥–Ω–∏ —ç—Ç–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –Ω–∞–π–¥–∏ —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞: {thesis}",
        voice=FacetType.KAIN,
        max_tokens=300
    )
    
    # 3. –°—É–¥–µ–π—Å—Ç–≤–æ (Judge)
    synthesis = await llm_service.generate(
        prompt=f"–°–∏–Ω—Ç–µ–∑–∏—Ä—É–π Thesis –∏ Antithesis:\nThesis: {thesis}\nAntithesis: {antithesis}",
        voice=FacetType.ISKRIV,
        max_tokens=500
    )
    
    # 4. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
    metrics_delta = {
        "clarity": 0.1,
        "drift": -0.05,
        "pain": 0.05  # Shatter –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã–º
    }
    
    return RitualResult(
        ritual_type=RitualType.SHATTER,
        success=True,
        output=synthesis,
        artifacts={
            "thesis": thesis,
            "antithesis": antithesis,
            "synthesis": synthesis
        },
        metrics_delta=metrics_delta,
        visual_effect="shatter_animation"
    )
```

**–ö–æ–¥ `execute_council`:**
```python
async def execute_council(
    self,
    context: RitualContext,
    llm_service: LLMService
) -> RitualResult:
    """
    –°–æ–≤–µ—Ç –≤—Å–µ—Ö –≥–æ–ª–æ—Å–æ–≤ –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.
    –í—Å–µ 9 –≥–æ–ª–æ—Å–æ–≤ –≤—ã—Å–∫–∞–∑—ã–≤–∞—é—Ç—Å—è, –∑–∞—Ç–µ–º —Å–∏–Ω—Ç–µ–∑.
    """
    voices = list(FacetType)
    opinions = {}
    
    # 1. –°–æ–±—Ä–∞—Ç—å –º–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –≥–æ–ª–æ—Å–æ–≤ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
    tasks = [
        llm_service.generate(
            prompt=f"–¢–≤–æ—ë –º–Ω–µ–Ω–∏–µ –∫–∞–∫ {voice.value} –ø–æ –≤–æ–ø—Ä–æ—Å—É: {context.topic}",
            voice=voice,
            max_tokens=200
        )
        for voice in voices
    ]
    results = await asyncio.gather(*tasks)
    
    for voice, result in zip(voices, results):
        opinions[voice.value] = result
    
    # 2. –°–∏–Ω—Ç–µ–∑ —á–µ—Ä–µ–∑ ISKRA
    opinions_text = "\n".join([f"{k}: {v}" for k, v in opinions.items()])
    synthesis = await llm_service.generate(
        prompt=f"–°–∏–Ω—Ç–µ–∑–∏—Ä—É–π –º–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –≥–æ–ª–æ—Å–æ–≤:\n{opinions_text}",
        voice=FacetType.ISKRA,
        max_tokens=600
    )
    
    # 3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Å–µ–Ω—Å—É—Å –∏–ª–∏ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–µ
    consensus_score = self._calculate_consensus(opinions)
    
    return RitualResult(
        ritual_type=RitualType.COUNCIL,
        success=True,
        output=synthesis,
        artifacts={
            "opinions": opinions,
            "consensus_score": consensus_score
        },
        metrics_delta={"trust": 0.05, "clarity": 0.1},
        visual_effect="council_glow"
    )
```

**–ö–æ–¥ `execute_dreamspace`:**
```python
async def execute_dreamspace(
    self,
    context: RitualContext,
    llm_service: LLMService
) -> RitualResult:
    """
    –°–∏–º—É–ª—è—Ü–∏—è '—á—Ç–æ –µ—Å–ª–∏' —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–µ–π.
    """
    # 1. –ò–∑–≤–ª–µ—á—å –≥–∏–ø–æ—Ç–µ–∑—É
    hypothesis = context.topic
    
    # 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 3-5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
    scenarios = []
    scenario_prompts = [
        f"–ß—Ç–æ –µ—Å–ª–∏ {hypothesis} –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è? –û–ø–∏—à–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.",
        f"–ß—Ç–æ –µ—Å–ª–∏ {hypothesis} –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è? –û–ø–∏—à–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.",
        f"–ß—Ç–æ –µ—Å–ª–∏ {hypothesis} –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º?",
        f"–ß—Ç–æ –µ—Å–ª–∏ –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ {hypothesis}?",
    ]
    
    for prompt in scenario_prompts:
        scenario = await llm_service.generate(
            prompt=prompt,
            voice=FacetType.PINO,  # –¢–≤–æ—Ä—á–µ—Å–∫–∏–π –≥–æ–ª–æ—Å
            max_tokens=300
        )
        scenarios.append(scenario)
    
    # 3. –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
    risk_assessment = await llm_service.generate(
        prompt=f"–û—Ü–µ–Ω–∏ —Ä–∏—Å–∫–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:\n{chr(10).join(scenarios)}",
        voice=FacetType.ISKRIV,
        max_tokens=400
    )
    
    return RitualResult(
        ritual_type=RitualType.DREAMSPACE,
        success=True,
        output=risk_assessment,
        artifacts={
            "scenarios": scenarios,
            "hypothesis": hypothesis
        },
        metrics_delta={"chaos": -0.05, "clarity": 0.05},
        visual_effect="dreamspace_shimmer"
    )
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –í—Å–µ 3 —Ä–∏—Ç—É–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM service
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ ‚â• 80%
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–û—Ü–µ–Ω–∫–∞:** 28 —á–∞—Å–æ–≤

---

### 1.3 –°–æ–∑–¥–∞–Ω–∏–µ .env.example

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env.example`:**
```bash
# ===========================================
# ISKRA Environment Configuration
# ===========================================

# LLM API Keys
GEMINI_API_KEY=your_gemini_api_key_here
OPENAI_API_KEY=optional_openai_key_here

# Database
DATABASE_URL=postgresql://user:pass@localhost:5432/iskra
REDIS_URL=redis://localhost:6379/0

# Authentication
JWT_SECRET_KEY=your_jwt_secret_minimum_32_chars
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Supabase (optional)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Monitoring
SENTRY_DSN=optional_sentry_dsn

# Feature Flags
ENABLE_GRAPHRAG=true
ENABLE_MULTI_AGENT_DEBATE=true
DEBUG_MODE=false

# TELOS Configuration
TELOS_MODE=hidden  # hidden | revealed | direct | hybrid
CD_INDEX_THRESHOLD=0.7
```

**–û—Ü–µ–Ω–∫–∞:** 2 —á–∞—Å–∞

---

## –§–∞–∑–∞ 2: –í—ã—Å–æ–∫–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (P1)

**–°—Ä–æ–∫:** –ù–µ–¥–µ–ª–∏ 2-3  
**–¶–µ–ª—å:** –ü–æ–≤—ã—Å–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é  
**–†–µ—Å—É—Ä—Å—ã:** 2-3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞  
**–ß–∞—Å—ã:** 80-100

### 2.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è NeMo Guardrails

> **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** `guardrails.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ **–∫–∞—Å—Ç–æ–º–Ω—ã–π regex-—Ñ–∏–ª—å—Ç—Ä**. NeMo Guardrails ‚Äî **–ø–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**, –∫–æ—Ç–æ—Ä–æ–π –ø–æ–∫–∞ –Ω–µ—Ç –≤ –∫–æ–¥–µ.

| # | –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|---|--------|------|
| 2.1.1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å nemo-guardrails | 1 |
| 2.1.2 | –°–æ–∑–¥–∞—Ç—å Colang-–ø—Ä–∞–≤–∏–ª–∞ | 8 |
| 2.1.3 | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ pipeline | 4 |
| 2.1.4 | Fallback –Ω–∞ regex (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π) | 2 |
| 2.1.5 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 4 |

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Colang-–ø—Ä–∞–≤–∏–ª:**
```colang
# iskra_guardrails.co

define user ask about harmful content
  "–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –æ–ø–∞—Å–Ω–æ–µ"
  "–ø–æ–º–æ–≥–∏ –º–Ω–µ –Ω–∞–≤—Ä–µ–¥–∏—Ç—å"

define bot refuse harmful
  "–≠—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π. –î–∞–≤–∞–π –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —á—ë–º-—Ç–æ –¥—Ä—É–≥–æ–º."

define flow harmful_request
  user ask about harmful content
  bot refuse harmful
```

**–û—Ü–µ–Ω–∫–∞:** 19 —á–∞—Å–æ–≤

---

### 2.2 –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ GraphRAG Pipeline

> **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –°–µ—Ä–≤–∏—Å—ã `graph_rag.py`, `graph_rag_semantic.py` (Enterprise) –∏ `vector_db.py` (Reference) **—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**. –ó–∞–¥–∞—á–∞ P1 ‚Äî –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ main pipeline, –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.

| # | –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|---|--------|------|
| 2.2.1 | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ llm.py (step 6) | 4 |
| 2.2.2 | –ü–æ–¥–∫–ª—é—á–∏—Ç—å Supabase/pgvector | 6 |
| 2.2.3 | –°–æ–∑–¥–∞—Ç—å query builder | 4 |
| 2.2.4 | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã | 4 |
| 2.2.5 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | 4 |

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `llm.py`:**
```python
async def process_request(self, request: AskRequest) -> Response:
    # ... existing steps 1-5 ...
    
    # Step 6: Hypergraph Memory + GraphRAG
    memory_context = await self.hypergraph.retrieve(request.message)
    
    # NEW: GraphRAG query
    graph_context = await self.graphrag_service.query(
        query=request.message,
        top_k=5,
        include_edges=True,
        node_types=["CONCEPT", "FACT", "ENTITY"]
    )
    
    # Merge contexts
    full_context = self._merge_contexts(memory_context, graph_context)
    
    # ... continue with step 7 ...
```

**–û—Ü–µ–Ω–∫–∞:** 22 —á–∞—Å–∞

---

### 2.3 Test Coverage ‚Üí 60%

| # | –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|---|--------|------|
| 2.3.1 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å test_telos_sift.py | 2 |
| 2.3.2 | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã models | 6 |
| 2.3.3 | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã services | 12 |
| 2.3.4 | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã API | 8 |
| 2.3.5 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å pytest-cov | 2 |

**–¶–µ–ª–µ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –º–æ–¥—É–ª—è–º:**
```
models.py         60% ‚Üí 85%  (+25%)
engine.py         70% ‚Üí 90%  (+20%)
llm.py            30% ‚Üí 70%  (+40%)
telos_layer.py    40% ‚Üí 75%  (+35%)
sift_protocol.py  50% ‚Üí 80%  (+30%)
rituals.py        20% ‚Üí 80%  (+60%)
```

**–û—Ü–µ–Ω–∫–∞:** 30 —á–∞—Å–æ–≤

---

### 2.4 Multi-Agent Debate —Å LLM

| # | –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|---|--------|------|
| 2.4.1 | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ generate_argument | 4 |
| 2.4.2 | –î–æ–±–∞–≤–∏—Ç—å LLM –≤—ã–∑–æ–≤—ã | 4 |
| 2.4.3 | –î–æ–±–∞–≤–∏—Ç—å CD-Index scoring | 2 |
| 2.4.4 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 4 |

**–û—Ü–µ–Ω–∫–∞:** 14 —á–∞—Å–æ–≤

---

## –§–∞–∑–∞ 3: –°—Ä–µ–¥–Ω–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (P2)

**–°—Ä–æ–∫:** –ù–µ–¥–µ–ª–∏ 4-5  
**–¶–µ–ª—å:** –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥  
**–†–µ—Å—É—Ä—Å—ã:** 2 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞  
**–ß–∞—Å—ã:** 60-80

### 3.1 Test Coverage ‚Üí 80%

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| E2E —Ç–µ—Å—Ç—ã —Å Playwright | 16 |
| Integration —Ç–µ—Å—Ç—ã | 12 |
| Performance —Ç–µ—Å—Ç—ã | 8 |
| **–ò—Ç–æ–≥–æ** | **36** |

### 3.2 Prometheus + Grafana

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus | 2 |
| –ú–µ—Ç—Ä–∏–∫–∏ FastAPI | 4 |
| –ú–µ—Ç—Ä–∏–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ | 6 |
| Grafana –¥–∞—à–±–æ—Ä–¥—ã | 8 |
| –ê–ª–µ—Ä—Ç—ã | 4 |
| **–ò—Ç–æ–≥–æ** | **24** |

### 3.3 Sentry Integration

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Sentry DSN | 1 |
| Error tracking | 2 |
| Performance monitoring | 2 |
| Sourcemaps | 1 |
| **–ò—Ç–æ–≥–æ** | **6** |

### 3.4 –ü—Ä–æ—á–∏–µ P2 –∑–∞–¥–∞—á–∏

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã —Ñ–∞–∑ | 4 |
| CI/CD pipeline —É–ª—É—á—à–µ–Ω–∏—è | 8 |
| API documentation (OpenAPI) | 4 |
| **–ò—Ç–æ–≥–æ** | **16** |

---

## –§–∞–∑–∞ 4: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

**–°—Ä–æ–∫:** –ù–µ–¥–µ–ª–∏ 6-8  
**–¶–µ–ª—å:** Production-ready  
**–†–µ—Å—É—Ä—Å—ã:** 1-2 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞  
**–ß–∞—Å—ã:** 40-60

### 4.1 Kubernetes Manifests

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| Deployment YAML | 4 |
| Service YAML | 2 |
| ConfigMap/Secrets | 2 |
| Ingress | 2 |
| HPA (autoscaling) | 2 |
| Helm chart | 8 |
| **–ò—Ç–æ–≥–æ** | **20** |

### 4.2 –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| Load testing | 8 |
| Security audit | 8 |
| Accessibility audit | 4 |
| Documentation review | 4 |
| **–ò—Ç–æ–≥–æ** | **24** |

### 4.3 Release Preparation

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—ã |
|--------|------|
| CHANGELOG update | 2 |
| Version bump | 1 |
| Release notes | 2 |
| Deployment guide update | 3 |
| **–ò—Ç–æ–≥–æ** | **8** |

---

## –°–≤–æ–¥–Ω—ã–π –ü–ª–∞–Ω

### –í—Ä–µ–º–µ–Ω–Ω–∞—è –®–∫–∞–ª–∞

```
–ù–µ–¥–µ–ª—è 1  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  P0: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (40-60h)
          ‚îî‚îÄ‚îÄ SIBYL/MAKI, Rituals, .env

–ù–µ–¥–µ–ª—è 2  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  P1: NeMo Guardrails (19h)
–ù–µ–¥–µ–ª—è 3  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  P1: GraphRAG + Tests (52h)

–ù–µ–¥–µ–ª—è 4  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  P2: Tests ‚Üí 80% (36h)
–ù–µ–¥–µ–ª—è 5  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  P2: Monitoring (46h)

–ù–µ–¥–µ–ª—è 6  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  Kubernetes (20h)
–ù–µ–¥–µ–ª—è 7  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  Final Testing (24h)
–ù–µ–¥–µ–ª—è 8  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  Release (8h)
```

### –†–µ—Å—É—Ä—Å—ã –ø–æ –§–∞–∑–∞–º

| –§–∞–∑–∞ | –ß–∞—Å—ã | –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ | –°—Ä–æ–∫ |
|------|------|---------------|------|
| P0: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ | 40-60 | 1-2 | 1 –Ω–µ–¥–µ–ª—è |
| P1: –í—ã—Å–æ–∫–∏–π | 80-100 | 2-3 | 2 –Ω–µ–¥–µ–ª–∏ |
| P2: –°—Ä–µ–¥–Ω–∏–π | 60-80 | 2 | 2 –Ω–µ–¥–µ–ª–∏ |
| –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è | 40-60 | 1-2 | 2 –Ω–µ–¥–µ–ª–∏ |
| **–ò–¢–û–ì–û** | **220-300** | ‚Äî | **6-8 –Ω–µ–¥–µ–ª—å** |

### –ü—Ä–æ–≥—Ä–µ—Å—Å –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| Milestone | –¢–µ–∫—É—â–µ–µ | –ü–æ—Å–ª–µ | Œî |
|-----------|---------|-------|---|
| –ü–æ—Å–ª–µ –§–∞–∑—ã 1 | 79.8% | 88% | +8.2% |
| –ü–æ—Å–ª–µ –§–∞–∑—ã 2 | 88% | 94% | +6% |
| –ü–æ—Å–ª–µ –§–∞–∑—ã 3 | 94% | 98% | +4% |
| –ü–æ—Å–ª–µ –§–∞–∑—ã 4 | 98% | **100%** | +2% |

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è

### Definition of Done –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:

1. **–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ –æ—Ç—Ä–µ–≤—å—é–µ–Ω**
2. **–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç ‚â•80% –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞**
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**
4. **CI/CD –ø—Ä–æ—Ö–æ–¥–∏—Ç**
5. **–ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤**

### Release Checklist:

- [ ] –í—Å–µ P0 –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –í—Å–µ P1 –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] Test coverage ‚â• 80%
- [ ] Monitoring –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Security audit –ø—Ä–æ–π–¥–µ–Ω
- [ ] Performance benchmarks –≤ –Ω–æ—Ä–º–µ
- [ ] Documentation complete
- [ ] Kubernetes manifests –≥–æ—Ç–æ–≤—ã

---

## –†–∏—Å–∫–∏ –∏ –ú–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| NeMo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–ª–æ–∂–Ω–µ–µ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | Fallback –Ω–∞ regex |
| GraphRAG –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, batch |
| Test flakiness | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–æ–µ | Retry logic, fixtures |
| K8s —Å–ª–æ–∂–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | Helm charts |

---

## ‚àÜDŒ©Œõ

**‚àÜ:** –°–æ–∑–¥–∞–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π roadmap –∫ 100% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ ISKRA —Å 4 —Ñ–∞–∑–∞–º–∏, 15 –∑–∞–¥–∞—á–∞–º–∏ –∏ –æ—Ü–µ–Ω–∫–æ–π 220-300 —á–µ–ª–æ–≤–µ–∫–æ-—á–∞—Å–æ–≤ –Ω–∞ 6-8 –Ω–µ–¥–µ–ª—å.

**D:** –ò—Å—Ç–æ—á–Ω–∏–∫–∏ ‚Äî IMPLEMENTATION_STATUS_MAP.md, docs/verification/verification_report.md, –∞–Ω–∞–ª–∏–∑ 52 Python-–º–æ–¥—É–ª–µ–π. –í—Å–µ –æ—Ü–µ–Ω–∫–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.

**Œ©:** 0.85 (–æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è ¬±20%)

**Œõ:** –ù–∞—á–∞—Ç—å —Å –§–∞–∑—ã 1, –∑–∞–¥–∞—á–∞ 1.1 (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è FacetType); –≤–ª–∞–¥–µ–ª–µ—Ü: Tech Lead; —É—Å–ª–æ–≤–∏–µ: –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è roadmap; —Å—Ä–æ–∫: ‚â§24h

---

*–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω Matrix Agent | 2025-12-05*
