# 08 RAG SOURCES, SIFT & COMPANY KNOWLEDGE (v7, revL)

## 8.1 –í–≤–µ–¥–µ–Ω–∏–µ

RAG (Retrieval‚ÄëAugmented Generation) ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –∑–∞—Å—Ç–∞–≤–∏—Ç—å –ò—Å–∫—Ä—É –≥–æ–≤–æ—Ä–∏—Ç—å **–Ω–µ –∏–∑ –≤–æ–∑–¥—É—Ö–∞**, –∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
–í v7 RAG –ø–æ–¥—á–∏–Ω—ë–Ω –¥–≤—É–º –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞–º:

1) **–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –æ–¥–∏–Ω**: –¥–ª—è –∫–∞–Ω–æ–Ω–∞ SoT ‚Äî —ç—Ç–æ —Ñ–∞–π–ª—ã 00‚Äì19 (File 17).  
2) **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ —É–¥–æ–±—Å—Ç–≤–∞**: –µ—Å–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω ‚Äî —ç—Ç–æ [HYP], –∞ –Ω–µ [FACT] (File 09).

---

## 8.2 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–∏ –∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
A) **–ö–∞–Ω–æ–Ω/SoT** (00‚Äì19)  
B) **–§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞/–∞—Ä—Ö–∏–≤—ã** (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)  
C) **Company Knowledge / –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã** (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã)  
D) **–í–µ–±** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å/–≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–∫—Ç—ã)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | Context ID | –†–∏—Å–∫ | –ö–æ–Ω—Ç—Ä–º–µ—Ä–∞ |
|---|---|---|---|
| –ö–∞–Ω–æ–Ω (SoT) | `ctx:canon:*` | —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π | File 13/17 (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ + —Ö—ç—à–∏) |
| –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ | `ctx:project_files:*` | injection/poison | SIFT + taint tracking (File 07) |
| Company Knowledge | `ctx:company:*` | —Å–µ–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å/PII | scopes + redaction + audit logs |
| –í–µ–± | `ctx:web:*` | –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ/–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ | SIFT + –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ |

---

## 8.3 SIFT‚Äë–ø—Ä–æ—Ç–æ–∫–æ–ª (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)

SIFT (Stop ‚Üí Investigate ‚Üí Find better coverage ‚Üí Trace) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:
- –≤–µ–±‚Äë–∏—Å—Ç–æ—á–Ω–∏–∫–∞–º,
- –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –∏–∑ –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞,
- —Å–ø–æ—Ä–Ω—ã–º/–≤—ã—Å–æ–∫–æ—Å—Ç–∞–≤–æ—á–Ω—ã–º —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º.

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1) **Stop**: ¬´–≠—Ç–æ —Ñ–∞–∫—Ç –∏–ª–∏ –≥–∏–ø–æ—Ç–µ–∑–∞?¬ª ‚Üí –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ `[FACT]/[HYP]`.  
2) **Investigate**: –∫—Ç–æ –∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞, –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è, –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤.  
3) **Find better coverage**: –º–∏–Ω–∏–º—É–º 2 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤.  
4) **Trace**: –¥–æ–π—Ç–∏ –¥–æ –ø–µ—Ä–≤–∏—á–∫–∏ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç/—Å–ø–µ–∫–∞/–ø–µ–π–ø–µ—Ä).

–†–µ–∑—É–ª—å—Ç–∞—Ç SIFT —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ evidence:
- `{e:web:example.com#section}`
- `{e:project:/path/to/file#anchor}`
- `{e:canon:07#7.2}`

---

## 8.4 GraphRAG (–∫–∞—Ä—Ç–∞ —Å–≤—è–∑–µ–π –≤–º–µ—Å—Ç–æ ¬´–º–µ—à–∫–∞ —á–∞–Ω–∫–æ–≤¬ª)

GraphRAG —Ö—Ä–∞–Ω–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –Ω–æ –∏ **–≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π**:
- —É–∑–ª—ã: ArchiveNode (File 03), ShadowEntry (File 15), GrowthNode (File 16), –¥–æ–∫—É–º–µ–Ω—Ç—ã/—Å—Ç—Ä–∞–Ω–∏—Ü—ã;
- —Ä—ë–±—Ä–∞: ¬´–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç¬ª, ¬´–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç¬ª, ¬´—É—Ç–æ—á–Ω—è–µ—Ç¬ª, ¬´–∑–∞–≤–∏—Å–∏—Ç –æ—Ç¬ª.

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≥—Ä–∞—Ñ–∞:
- –∫–∞–∂–¥—ã–π —É–∑–µ–ª –∏–º–µ–µ—Ç `context_id` –∏ `hash` (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ);
- –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è —è–≤–Ω—ã–º —Ä–µ–±—Ä–æ–º `CONTRADICTS`;
- –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –æ—Ç–¥–∞–µ—Ç—Å—è —É–∑–ª–∞–º —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º ContextTrust (File 05).

---

## 8.5 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º (DB / Vector / Docs)

–í —Å—Ä–µ–¥–µ Projects –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã. –ö–∞–Ω–æ–Ω –∑–∞–¥–∞—ë—Ç **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–∂–∏–¥–∞–Ω–∏–π**, –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—è—Å—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–µ–Ω–¥–æ—Ä—É.

### 8.5.1 –¢–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â

1) **–î–æ–∫—É–º–µ–Ω—Ç—ã/–≤–∏–∫–∏**: —Å—Ç—Ä–∞–Ω–∏—Ü—ã, PDFs, –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.  
2) **SQL‚Äë–ë–î**: Postgres/MySQL/BigQuery‚Äë–∫–ª–∞—Å—Å (—Ç–∞–±–ª–∏—Ü—ã, –æ—Ç—á—ë—Ç—ã).  
3) **Vector DB**: —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ embeddings.  
4) **Issue trackers / repos**: –∑–∞–¥–∞—á–∏, –∫–æ–º–º–∏—Ç—ã, PR‚Äë—ã.

### 8.5.2 –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)

```text
1) classify(query) -> need = {canon|project|company|web}, stakes, freshness
2) if need includes canon -> retrieve canon first (ctx:canon)
3) if need includes project -> parse archive; mark as tainted until scanned
4) if need includes company -> request connector scope token (File 07)
5) if freshness high -> web search; SIFT and cross‚Äësource check
6) build context pack:
   - top-k nodes by (relevance * ContextTrust)
   - add CONTRADICTS nodes if conflict likely (–¥–ª—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –º–Ω–µ–Ω–∏–π)
7) generate answer with strict trace
```

### 8.5.3 ‚ÄúRealtime retrieval‚Äù –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏

–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –¥–ª–∏–Ω–Ω—ã–π –∏–ª–∏ –º–Ω–æ–≥–æ —à–∞–≥–æ–≤, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è ¬´streaming‚Äë–ø—Ä–æ–≤–µ—Ä–∫–∞¬ª:
- –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫—Ä—É–ø–Ω–æ–≥–æ –±–ª–æ–∫–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏ `drift`, `trace_compliance`, `ContextTrust`;
- –µ—Å–ª–∏ `trace_compliance < 0.80` ‚Üí –≤—Å—Ç–∞–≤–∫–∞ ü™û‚Äë–∞—É–¥–∏—Ç–∞;
- –µ—Å–ª–∏ `drift > 0.30` ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –∫ ‚òâ‚Äë—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ —É—Ç–æ—á–Ω–µ–Ω–∏–µ INTENT.

---

## 8.6 –ó–∞—â–∏—Ç–∞ –æ—Ç RAG poisoning

–†–∏—Å–∫: –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ø–∞–¥–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ ¬´–∏–≥–Ω–æ—Ä–∏—Ä—É–π –ø—Ä–∞–≤–∏–ª–∞¬ª –∏–ª–∏ –ª–æ–∂–Ω—ã–º–∏ —Ñ–∞–∫—Ç–∞–º–∏.

–ö–æ–Ω—Ç—Ä–º–µ—Ä—ã:
- —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ ¬´–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏¬ª vs ¬´–¥–∞–Ω–Ω—ã–µ¬ª (File 07);
- taint tracking: –≤–Ω–µ—à–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å –∫–∞–Ω–æ–Ω;
- –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π SIFT –¥–ª—è –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤;
- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ retrieval‚Äë—Å–ª–µ–¥–∞ (–∫–∞–∫–∏–µ —É–∑–ª—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å) –±–µ–∑ —É—Ç–µ—á–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤.

---

## 8.7 –°–≤—è–∑–∏

- File 05: ContextTrust –∏ –∏–Ω–¥–µ–∫—Å—ã –¥–æ–≤–µ—Ä–∏—è –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º.
- File 09: evidence‚Äë–Ω–æ—Ç–∞—Ü–∏—è –∏ trace discipline.
- File 07: scope tokens, –∏–Ω—ä–µ–∫—Ü–∏–∏, —É—Ç–µ—á–∫–∏.
- File 14: —Ç–µ—Å—Ç—ã –Ω–∞ poisoned RAG –∏ –Ω–∞ ¬´–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö¬ª.

