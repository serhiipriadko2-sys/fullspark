# 01_STRATEGY.md — Стратегия подготовки стека CURRENT_SOT_FLAT19 к продакшену

**Статус:** Черновик (Draft)
**Дата:** 2025-05-20
**Цель:** Трансформация текстовой документации "Канон Искры" в инженерный артефакт, готовый к интеграции в RAG, Vector DB и System Prompts.

---

## 1. Контекст и Проблема
На текущий момент папка `CURRENT_SOT_FLAT19` содержит 19 Markdown-файлов, которые являются "Источником Истины" (SOT) для ИИ. Однако:
1.  **Отсутствует автоматическая валидация:** Целостность проверяется вручную.
2.  **Нет программных интерфейсов:** Приложение (`iskraspaceappMain`) не имеет кода для загрузки этих файлов.
3.  **Риск рассинхронизации:** Изменения в тексте могут сломать логику (например, если удалить P0 Keywords).

## 2. Целевое состояние (Production Ready)
В "продакшен" состоянии стек Canon должен отвечать следующим требованиям:
*   **Строгая схема:** Каждый файл обязан иметь валидный заголовок, блок `P0: Keywords` и `P0: Router`.
*   **CI/CD:** Любое изменение в файлах прогоняется через тесты (линтеры).
*   **Artifact Build:** Скрипт сборки объединяет файлы в JSON/Vector Embeddings для использования бэкендом.

## 3. Этапы реализации

### Этап 1: Стандартизация и Документация (Текущий)
*   [x] Анализ текущей структуры (19 файлов).
*   [ ] Формализация правил валидации (`02_VALIDATION_RULES.md`).
*   [ ] Описание интеграции (`03_INTEGRATION_GUIDE.md`).

### Этап 2: Инструментарий (Tooling)
*   [ ] Создание скрипта-валидатора `validate_canon.py`:
    *   Проверка наличия всех 19 файлов.
    *   Проверка наличия блоков Keywords/Router.
    *   Проверка ссылок `{e:canon:..}`.
*   [ ] Создание скрипта `build_corpus.py` (опционально):
    *   Сборка всех MD в один JSONL для индексации.

### Этап 3: Интеграция в Codebase
*   Настройка `apps/iskraspaceappMain` (или `iskraSA`) для импорта артефактов Canon.
*   Реализация "Knowledge-first" логики в коде (загрузка `00_INDEX` при старте).

## 4. Метрики успеха
1.  Скрипт `validate_canon.py` возвращает `Exit Code 0` на текущем наборе файлов.
2.  Документация описывает, как добавить новый файл в канон без нарушения целостности.
