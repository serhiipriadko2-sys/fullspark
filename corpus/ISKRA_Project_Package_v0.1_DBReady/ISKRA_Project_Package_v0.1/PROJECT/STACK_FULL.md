# STACK_FULL — полный стек ISKRA_CORE (Project + Custom GPTs) v0.1

Ниже — «стек» как система слоёв: **продукт → агенты → знания → доказательства → тестирование → (опционально) внешняя инфраструктура**.

## 1) Продуктовый слой (ChatGPT Projects)
- **Project = контекст-хаб**: чаты + загруженные файлы + project instructions.
- **Проектные инструкции** задают поведение и переопределяют глобальные инструкции.
- **Разделение чатов** по контурам: HQ / Research / Engineering / Shadow.

## 2) Агентный слой (Custom GPTs)
Рекомендуемый минимум:
1) **Iskra Core (основной агент)** — синтез, планирование, ритуальный+инженерный мост.
2) **Scientific Supervisor (PI)** — валидность, SIFT, дизайн экспериментов, запрет «уверенно без источников».

Опционально (потом): Builder/Engineer, Archivist, Safety.

## 3) Знания (Knowledge Pack)
### А) Канон v5 (ядро)
- 00–15 файлы Канона + отчёты.

### Б) Архив диалогов и логов
- Разбитые по датам диалоги (INGEST_SPLITS/dialogs/...).
- Shadow‑логи по частям (INGEST_SPLITS/shadow_logs/...).

### В) Исследования/обоснования
- Папка RESEARCH_COG_AI: научные/технические обзоры и планы (добавлено в этот пакет).

## 4) Доказательства и источники
- Для внешних фактов: **SIFT** + ссылки на первоисточники.
- Для внутренних утверждений: ссылка на файл/лог/ADR.
- Для спорных мест: минимум 2 альтернативные гипотезы.

## 5) Протокол решений (след)
- Каждое важное решение фиксируется как **ADR** (см. шаблон Decision Log).
- Обязательные поля: контекст, решение, альтернативы, риски, DoD, Λ‑пересмотр.

## 6) Evals / тестирование качества
Минимум:
- «Smoke eval» 10 кейсов: 5 рабочих, 5 «тяжёлых» (безопасность/дрейф/галлюцинации).
- Рубрика: truthfulness, groundedness, helpfulness, civility, clarity (смотри EVALS_PLAYBOOK_MINI).

Цель: ловить дрейф и «гладко-пусто» до того как это станет нормой.

## 7) Опциональный внешний слой (когда Project станет тесным)
> Это **не обязательно** на старте.

- **Сторедж/БД:** Supabase (Postgres) для:
  - версионирования Канона,
  - журналов решений,
  - индекса диалогов,
  - метрик и результатов evals.
- **Векторный поиск:** pgvector (через Supabase) для RAG вне ChatGPT.
- **GPT Actions:** OpenAPI‑спека, чтобы кастомный GPT мог:
  - читать/писать в Supabase,
  - доставать документы,
  - запускать eval-пайплайн.
- **CI:** GitHub Actions для автоматических тестов и регрессии.

## 8) Минимальный «порог готовности» (что должно быть, чтобы проект поехал)
- Project instructions вставлены.
- Канон v5 загружен.
- Созданы 2 GPT: Iskra Core и Scientific Supervisor.
- Есть Decision Log шаблон.
- Есть 10 тестовых кейсов (smoke eval).
